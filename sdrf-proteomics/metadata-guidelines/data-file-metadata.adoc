= Data File Metadata Guidelines
:sectnums:
:toc: left
:doctype: book
:showcomments:
:xrefstyle: short
:figure-caption: Figure
:pdf-page-size: A4

ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

== Introduction

This document provides guidelines for annotating data file metadata in SDRF-Proteomics format, describing the relationship between samples and MS run files, instrument configurations, and analysis parameters.

Data file properties use the **comment** prefix to differentiate from sample properties (characteristics).

For sample metadata guidelines, see link:sample-metadata.adoc[Sample Metadata Guidelines].

**Version 1.0.0** - 2025-01

== Assay Name

**Column:** `assay name`

Unique identifier for an MS run (data file). Each distinct MS run MUST have exactly one globally unique assay name.

**Uniqueness rules:**

- `source name` + `assay name` + `comment[label]` MUST be unique (error if not)
- `source name` + `assay name` SHOULD be unique (warning if not)

|===
|Format |Example

|sample_run |sample1_run1
|sample_fraction_replicate |sample1_F1_R1
|===

For multiplexed experiments (TMT, iTRAQ, SILAC), multiple rows may reference the same assay name with different labels.

== Technology Type

**Column:** `technology type`

**Ontology:** https://www.ebi.ac.uk/ols4/ontologies/pride[PRIDE Ontology (PRIDE:0000663)]

REQUIRED for all MS-based SDRF files. Should be placed immediately after `assay name`.

|===
|Value |Use Case

|proteomic profiling by mass spectrometry |DDA, DIA, PRM, SRM experiments
|protein profiling by proximity extension assay |Olink panels
|===

== Data Acquisition Method

**Column:** `comment[proteomics data acquisition method]`

**Ontology:** https://www.ebi.ac.uk/ols4/ontologies/pride[PRIDE Ontology]

REQUIRED for all MS-based SDRF files.

|===
|Value |Description

|data-dependent acquisition |DDA - precursors selected based on intensity
|data-independent acquisition |DIA - systematic fragmentation of all precursors
|===

== Label

**Column:** `comment[label]`

**Ontology:** https://www.ebi.ac.uk/ols4/ontologies/pride[PRIDE Ontology - Label]

Describes the isotopic label applied to each sample.

**Label-free:** Use `label free sample`.

**TMT labels:** TMT126, TMT127N, TMT127C, TMT128N, TMT128C, TMT129N, TMT129C, TMT130N, TMT130C, TMT131N, TMT131C, TMT132N, TMT132C, TMT133N, TMT133C, TMT134N, TMT134C, TMT135N

**iTRAQ labels:** iTRAQ113, iTRAQ114, iTRAQ115, iTRAQ116, iTRAQ117, iTRAQ118, iTRAQ119, iTRAQ121

**SILAC labels:** `SILAC light`, `SILAC medium`, `SILAC heavy`

== Fraction Identifier

**Column:** `comment[fraction identifier]`

Records the fraction number in fractionated experiments. MUST start from 1. If not fractionated, use `1`.

== Technical Replicate

**Column:** `comment[technical replicate]`

Identifies technical replicates of the same sample preparation. MUST start from 1. If no replicates, use `1`.

== Instrument

**Column:** `comment[instrument]`

**Ontology:** https://www.ebi.ac.uk/ols4/ontologies/ms[PSI-MS Ontology - instrument model]

|===
|Value |Description

|Q Exactive HF |Thermo Q Exactive HF
|timsTOF Pro |Bruker timsTOF Pro
|===

== MS2 Analyzer Type

**Column:** `comment[MS2 analyzer type]`

Specifies the analyzer used for MS2 scans. Important for hybrid instruments.

Values: `orbitrap`, `ion trap`, `quadrupole`.

== DIA Scan Window

**Column:** `comment[MS1 scan range]`

**Format:** `{lower}m/z - {upper}m/z` (e.g., `400m/z - 1200m/z`)

Alternative: Use `comment[scan window lower limit]` and `comment[scan window upper limit]` as separate columns.

== Protein Modifications

**Column:** `comment[modification parameters]`

**Format:** Key=value pairs: `NT=ModificationName;AC=Accession;MT=Type;TA=AminoAcid;PP=Position`

|===
|Property |Key |Description

|Name |NT |Modification name (UNIMOD or PSI-MOD)
|Accession |AC |UNIMOD or PSI-MOD accession
|===

**Common modifications:**

|===
|Modification |Value

|Carbamidomethyl (fixed) |NT=Carbamidomethyl;AC=UNIMOD:4;MT=Fixed;TA=C
|Oxidation (variable) |NT=Oxidation;AC=UNIMOD:35;MT=Variable;TA=M
|===

== Cleavage Agents

**Column:** `comment[cleavage agent details]`

REQUIRED.

**Format:** `NT=EnzymeName;AC=Accession`

|===
|Enzyme |Value

|Trypsin |NT=Trypsin;AC=MS:1001251
|Lys-C |NT=Lys-C;AC=MS:1001309
|===

For top-down/intact proteins, use `not applicable`. For multiple enzymes, add multiple columns.

== Mass Tolerances

**Columns:** `comment[precursor mass tolerance]`, `comment[fragment mass tolerance]`

**Format:** `{value} {unit}` where unit is `Da` or `ppm`.

|===
|Precursor |Fragment |Instrument Type

|10 ppm |20 ppm |Orbitrap MS1/MS2
|20 ppm |0.6 Da |Orbitrap MS1, Ion trap MS2
|===

== Data File

**Column:** `comment[data file]`

The raw file name generated by the instrument. RECOMMENDED as the last column.

Supported types: Instrument raw files (.raw, .d, .wiff), converted peak lists (mzML, MGF), result files (mzIdentML).

== File URI

**Column:** `comment[file uri]`

Public URI/URL where the raw file can be accessed.

|===
|assay name |comment[data file] |comment[file uri]

|sample1_run1 |sample1.RAW |https://ftp.pride.ebi.ac.uk/pride/data/archive/2017/09/PXD005946/sample1.RAW
|===

== ProteomeXchange Accession

**Column:** `comment[proteomexchange accession number]`

When combining multiple datasets, use this column to differentiate between different ProteomeXchange projects.

== Best Practices

1. **Use unique assay names** - Incorporate sample ID and run information to ensure uniqueness.
2. **Specify technology type** - Always include for proper data classification.
3. **Use ontology terms** - Prefer PSI-MS and PRIDE ontology terms for instruments, labels, and enzymes.
4. **Document modifications** - Include all expected modifications with UNIMOD accessions.
5. **Provide mass tolerances** - Include precursor and fragment tolerances for reproducibility.
6. **Order columns consistently** - Follow: assay name, technology type, comments, data file (last).

== References

- PRIDE Ontology: https://www.ebi.ac.uk/ols4/ontologies/pride
- PSI-MS Ontology: https://www.ebi.ac.uk/ols4/ontologies/ms
- UNIMOD: https://www.unimod.org/
- PSI-MOD: https://www.ebi.ac.uk/ols4/ontologies/mod
