= Data File Metadata Guidelines
:sectnums:
:toc: left
:doctype: book
:showcomments:
:xrefstyle: short
:figure-caption: Figure
:pdf-page-size: A4

ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

== Introduction

This document provides detailed guidelines for data file metadata fields that require specific formatting or have complex standardization requirements. For basic field descriptions, see the main link:../README.adoc[SDRF-Proteomics specification].

**Version 1.0.0** - 2025-01

== CV Term Format

For data file metadata columns that reference ontology terms, use the structured CV term format:

`NT={term name};AC={accession}`

**Examples:**

- Dissociation method: `NT=HCD;AC=PRIDE:0000590`
- Fractionation method: `NT=High-pH reversed-phase chromatography;AC=PRIDE:0000564`
- Instrument: `NT=Q Exactive HF;AC=MS:1002523`
- Label: `NT=TMT126;AC=PRIDE:0000285`

**Why use the structured format?**

1. **Automated annotation**: Many data file properties (instrument, acquisition method, dissociation method) can be automatically determined by software from raw files.
2. **Validation**: Accession numbers enable automated validation against ontologies.
3. **Interoperability**: Structured terms are unambiguous across different tools and databases.

NOTE: Unlike sample metadata (characteristics) which are typically annotated manually using simple term names, data file metadata benefits from the structured CV term format because these values are often extracted programmatically from instrument files.

== Label

**Column:** `comment[label]`

**Ontology:** https://www.ebi.ac.uk/ols4/ontologies/pride[PRIDE Ontology - Label]

Describes the isotopic label applied to each sample.

**Label-free:** Use `label free sample`.

**TMT labels:** TMT126, TMT127N, TMT127C, TMT128N, TMT128C, TMT129N, TMT129C, TMT130N, TMT130C, TMT131N, TMT131C, TMT132N, TMT132C, TMT133N, TMT133C, TMT134N, TMT134C, TMT135N

**iTRAQ labels:** iTRAQ113, iTRAQ114, iTRAQ115, iTRAQ116, iTRAQ117, iTRAQ118, iTRAQ119, iTRAQ121

**SILAC labels:** `SILAC light`, `SILAC medium`, `SILAC heavy`

== MS2 Analyzer Type

**Column:** `comment[MS2 analyzer type]`

Specifies the analyzer used for MS2 scans. Important for hybrid instruments.

Values: `orbitrap`, `ion trap`, `quadrupole`.

== DIA Scan Window

**Column:** `comment[MS1 scan range]`

**Format:** `{lower}m/z - {upper}m/z` (e.g., `400m/z - 1200m/z`)

Alternative: Use `comment[scan window lower limit]` and `comment[scan window upper limit]` as separate columns.

== Protein Modifications

**Column:** `comment[modification parameters]`

**Format:** Key=value pairs: `NT=ModificationName;AC=Accession;MT=Type;TA=AminoAcid;PP=Position`

|===
|Property |Key |Description

|Name |NT |Modification name (UNIMOD or PSI-MOD)
|Accession |AC |UNIMOD or PSI-MOD accession
|===

**Common modifications:**

|===
|Modification |Value

|Carbamidomethyl (fixed) |NT=Carbamidomethyl;AC=UNIMOD:4;MT=Fixed;TA=C
|Oxidation (variable) |NT=Oxidation;AC=UNIMOD:35;MT=Variable;TA=M
|===

== Cleavage Agents

**Column:** `comment[cleavage agent details]`

REQUIRED.

**Format:** `NT=EnzymeName;AC=Accession`

|===
|Enzyme |Value

|Trypsin |NT=Trypsin;AC=MS:1001251
|Lys-C |NT=Lys-C;AC=MS:1001309
|===

For top-down/intact proteins, use `not applicable`. For multiple enzymes, add multiple columns.

== Mass Tolerances

**Columns:** `comment[precursor mass tolerance]`, `comment[fragment mass tolerance]`

**Format:** `{value} {unit}` where unit is `Da` or `ppm`.

|===
|Precursor |Fragment |Instrument Type

|10 ppm |20 ppm |Orbitrap MS1/MS2
|20 ppm |0.6 Da |Orbitrap MS1, Ion trap MS2
|===

== Best Practices

1. **Use ontology terms** - Prefer PSI-MS and PRIDE ontology terms for labels and enzymes.
2. **Document modifications** - Include all expected modifications with UNIMOD accessions.
3. **Provide mass tolerances** - Include precursor and fragment tolerances for reproducibility.

== References

- PRIDE Ontology: https://www.ebi.ac.uk/ols4/ontologies/pride
- PSI-MS Ontology: https://www.ebi.ac.uk/ols4/ontologies/ms
- UNIMOD: https://www.unimod.org/
- PSI-MOD: https://www.ebi.ac.uk/ols4/ontologies/mod
