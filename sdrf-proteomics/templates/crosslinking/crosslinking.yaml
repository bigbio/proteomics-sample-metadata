name: crosslinking
description: SDRF template for crosslinking mass spectrometry (XL-MS) experiments. Extends ms-proteomics with crosslinking-specific columns for data analysis.
version: 1.1.0
extends: ms-proteomics
usable_alone: false
layer: experiment
columns:
  # =============================================================================
  # REQUIRED COLUMNS - Essential for XL-MS data analysis
  # =============================================================================

  # Sample-level: indicates this is a crosslinked sample
  - name: characteristics[enrichment process]
    description: |
      Indicates the sample enrichment strategy. For crosslinking experiments,
      use "enrichment of cross-linked peptides" (PRIDE:0000838) to identify crosslinked samples.
    requirement: required
    allow_not_applicable: false
    allow_not_available: false
    validators:
      - validator_name: ontology
        params:
          ontologies:
            - pride
            - efo
          parent_term: EFO:0009090
          error_level: error
          description: Enrichment type should be a child term of EFO:0009090 (enrichment process)
          examples:
            - enrichment of cross-linked peptides
            - enrichment of phosphorylated protein

  # Data acquisition: crosslinker details
  - name: comment[cross-linker]
    description: |
      Cross-linker compound with structured properties for analysis tools.
      Format: NT=name;AC=accession;CL=cleavable;TA=targets;MH/ML=stub masses
      Uses XLMOD ontology (parent term XLMOD:00004).
    requirement: required
    allow_not_applicable: false
    allow_not_available: false
    validators:
      - validator_name: pattern
        params:
          pattern: ^NT=.+;AC=(XLMOD|CHEBI|UNIMOD):\d+.*$
          description: Should follow structured format with at least NT (name) and AC (accession from XLMOD, ChEBI, or UNIMOD)
          examples:
            - NT=DSSO;AC=XLMOD:02010;CL=yes;TA=K,S,T,Y,nterm;MH=54.01;ML=85.98
            - NT=DSS;AC=XLMOD:02001;CL=no;TA=K,S,T,Y,nterm;SM=138.07
            - NT=BS3;AC=XLMOD:02000;CL=no;TA=K,S,T,Y,nterm;SM=138.07
            - NT=DSBU;AC=XLMOD:02011;CL=yes;TA=K,S,T,Y,nterm;MH=85.05;ML=111.03
            - NT=EDC;AC=XLMOD:02009;CL=no;TA=K,D,E
            - NT=SDA;AC=XLMOD:02005;CL=no;TA=K,S,T,Y,nterm

  - name: comment[dissociation method]
    description: |
      Fragmentation method used in MS2. Critical for cleavable crosslinkers (DSSO, DSBU)
      which generate diagnostic stub ions under specific fragmentation conditions.
    requirement: required
    allow_not_applicable: false
    allow_not_available: false
    validators:
      - validator_name: ontology
        params:
          ontologies:
            - ms
            - pride
          parent_term: MS:1000044
          error_level: error
          description: Dissociation method should be a child term of MS:1000044
          examples:
            - HCD
            - CID
            - ETD
            - EThcD
            - stepped HCD

  # =============================================================================
  # RECOMMENDED COLUMNS - Useful for analysis configuration
  # =============================================================================

  - name: comment[collision energy]
    description: Collision energy used for fragmentation. Important for cleavable crosslinker analysis.
    requirement: recommended
    allow_not_applicable: true
    allow_not_available: true
    validators:
      - validator_name: pattern
        params:
          pattern: ^\d+(\.\d+)?(%|eV)?$|^stepped\s+\d+(\.\d+)?[+-]\d+%?$|^normalized\s+\d+(\.\d+)?%?$
          description: Energy value with optional unit, supports stepped collision energy
          examples:
            - 27
            - 30%
            - stepped 27+-6%
            - normalized 27%

  - name: comment[crosslink enrichment method]
    description: Method used to enrich crosslinked peptides before MS analysis
    requirement: recommended
    allow_not_applicable: true
    allow_not_available: true
    validators:
      - validator_name: ontology
        params:
          ontologies:
            - pride
            - ms
          error_level: warning
          description: Enrichment method (PRIDE:0000586)
          examples:
            - size exclusion chromatography
            - strong cation exchange chromatography
            - high-pH reversed-phase chromatography
            - FAIMS

  # =============================================================================
  # OPTIONAL COLUMNS - Sample preparation details (not required for analysis)
  # =============================================================================

  - name: characteristics[crosslink type]
    description: Type of crosslinker chemistry (can be derived from reagent)
    requirement: optional
    allow_not_applicable: false
    allow_not_available: false
    validators:
      - validator_name: values
        params:
          values:
            - homo-bifunctional
            - hetero-bifunctional
            - zero-length
            - photo-reactive
            - MS-cleavable
          error_level: warning
          description: Type of crosslinker chemistry

  - name: characteristics[crosslink distance]
    description: Maximum Cα-Cα distance constraint provided by the crosslinker (for structural interpretation)
    requirement: optional
    allow_not_applicable: true
    allow_not_available: true
    validators:
      - validator_name: pattern
        params:
          pattern: ^\d+(\.\d+)?\s*[AÅ]$
          description: Distance should be a number followed by unit (A or Å)
          examples:
            - 30 A
            - 26.4 A
            - 11.4 A

  - name: comment[crosslinker concentration]
    description: Concentration of crosslinking reagent used
    requirement: optional
    allow_not_applicable: true
    allow_not_available: true
    validators:
      - validator_name: pattern
        params:
          pattern: ^\d+(\.\d+)?\s*(mM|uM|µM)$
          description: Concentration with unit
          examples:
            - 2 mM
            - 500 uM
            - 1 mM

  - name: characteristics[crosslinking reaction time]
    description: Duration of the crosslinking reaction
    requirement: optional
    allow_not_applicable: true
    allow_not_available: true
    validators:
      - validator_name: pattern
        params:
          pattern: ^\d+(\.\d+)?\s*(min|h|s)$
          description: Time should be a number followed by unit
          examples:
            - 30 min
            - 1 h
            - 45 min

  - name: characteristics[crosslinking temperature]
    description: Temperature at which crosslinking was performed
    requirement: optional
    allow_not_applicable: true
    allow_not_available: true
    validators:
      - validator_name: pattern
        params:
          pattern: ^\d+(\.\d+)?\s*[Cc]$|^room temperature$
          description: Temperature should be a number followed by C
          examples:
            - 25 C
            - 4 C
            - 37 C
            - room temperature

  - name: comment[crosslinker to protein ratio]
    description: Molar ratio of crosslinker to protein
    requirement: optional
    allow_not_applicable: true
    allow_not_available: true
    validators:
      - validator_name: pattern
        params:
          pattern: ^\d+:\d+.*$
          description: Ratio format
          examples:
            - 50:1
            - 100:1
            - 1:1 w/w

  - name: comment[quenching reagent]
    description: Reagent used to quench the crosslinking reaction
    requirement: optional
    allow_not_applicable: true
    allow_not_available: true
    validators:
      - validator_name: pattern
        params:
          pattern: ^.+$
          description: Chemical name of quenching reagent
          examples:
            - Tris-HCl
            - ammonium bicarbonate
            - glycine
