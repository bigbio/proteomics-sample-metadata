<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDRF Terms Reference - SDRF-Proteomics</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="images/favicon.png">
    <style>
        /* SDRF Terms Page Specific Styles */
        .terms-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-header h1 {
            margin-top: 0;
            border: none;
        }

        .page-header p {
            color: var(--text-light);
            font-size: 1.1rem;
        }

        .filters {
            background: var(--background-alt);
            padding: 1.25rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
            border: 1px solid var(--border-color);
        }

        .filter-row {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            align-items: flex-end;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
        }

        .filter-group label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-group input[type="text"],
        .filter-group select {
            padding: 0.5rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 0.9rem;
            min-width: 180px;
            background: var(--background);
        }

        .filter-group input[type="text"]:focus,
        .filter-group select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(37, 99, 235, 0.15);
        }

        .stats {
            font-size: 0.875rem;
            color: var(--text-light);
            margin-left: auto;
            align-self: center;
        }

        .clear-btn {
            padding: 0.5rem 1rem;
            background: var(--background);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            color: var(--text-color);
            transition: background 0.2s;
        }

        .clear-btn:hover {
            background: var(--border-color);
        }

        /* Table Styles */
        .terms-table-wrapper {
            overflow-x: auto;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }

        #termsTable {
            margin: 0;
            border: none;
        }

        #termsTable th {
            background: var(--primary-color);
            color: white;
            padding: 0.875rem 1rem;
            font-weight: 600;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
            user-select: none;
            border: none;
            border-bottom: 1px solid var(--primary-dark);
            white-space: nowrap;
        }

        #termsTable th:hover {
            background: var(--primary-dark);
        }

        #termsTable th.sorted-asc::after {
            content: ' ▲';
            font-size: 0.7rem;
        }

        #termsTable th.sorted-desc::after {
            content: ' ▼';
            font-size: 0.7rem;
        }

        #termsTable td {
            padding: 0.75rem 1rem;
            border: none;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.875rem;
            vertical-align: top;
        }

        #termsTable tr:hover {
            background-color: var(--background-alt);
        }

        #termsTable tr:last-child td {
            border-bottom: none;
        }

        /* Type badges */
        .type-characteristics {
            background-color: #dbeafe;
            color: #1e40af;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .type-comment {
            background-color: #ffedd5;
            color: #c2410c;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .type-other {
            background-color: #f3e8ff;
            color: #7c3aed;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            white-space: nowrap;
        }

        /* Requirement badges */
        .req-required {
            background-color: #fee2e2;
            color: #dc2626;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .req-recommended {
            background-color: #fef3c7;
            color: #d97706;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .req-optional {
            background-color: #dbeafe;
            color: #2563eb;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 700;
            white-space: nowrap;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .term-cell {
            display: flex;
            flex-direction: column;
            gap: 0.4rem;
        }

        .term-name {
            font-family: 'SF Mono', Monaco, Consolas, monospace;
            font-weight: 600;
        }

        .ontology-link {
            color: var(--primary-color);
            text-decoration: none;
            font-family: 'SF Mono', Monaco, Consolas, monospace;
            font-size: 0.8rem;
        }

        .ontology-link:hover {
            text-decoration: underline;
        }

        .to-be-filled {
            color: var(--text-light);
            font-style: italic;
            font-size: 0.8rem;
        }

        .usage-tag {
            display: inline-block;
            background: var(--code-bg);
            color: var(--text-color);
            padding: 0.15rem 0.4rem;
            border-radius: 3px;
            font-size: 0.7rem;
            margin: 0.1rem;
            white-space: nowrap;
        }

        .term-name {
            font-weight: 600;
            color: var(--text-color);
            font-family: 'SF Mono', Monaco, Consolas, monospace;
            font-size: 0.85rem;
        }

        .values-cell {
            font-size: 0.8rem;
            color: var(--text-light);
            max-width: 200px;
        }

        .description-cell {
            max-width: 250px;
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* Special value indicators */
        .special-values {
            display: flex;
            gap: 0.25rem;
            margin-top: 0.25rem;
        }

        .indicator {
            display: inline-block;
            padding: 0.1rem 0.35rem;
            border-radius: 3px;
            font-size: 0.65rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .indicator-na {
            background-color: #fef3c7;
            color: #92400e;
        }

        .indicator-nav {
            background-color: #e0e7ff;
            color: #3730a3;
        }

        .values-source-tag {
            display: inline-block;
            background: #ecfdf5;
            color: #065f46;
            padding: 0.15rem 0.4rem;
            border-radius: 3px;
            font-size: 0.7rem;
            margin: 0.1rem;
            white-space: nowrap;
            font-family: 'SF Mono', Monaco, Consolas, monospace;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .filter-row {
                flex-direction: column;
                align-items: stretch;
            }

            .filter-group input[type="text"],
            .filter-group select {
                min-width: 100%;
            }

            .stats {
                margin-left: 0;
                margin-top: 0.5rem;
            }
        }
    </style>
</head>
<body class="has-doc-header">
    <header class="doc-header">
        <div class="doc-header-brand">
            <a href="./index.html">SDRF-Proteomics</a>
        </div>
        <nav class="doc-header-nav">
            <a href="./index.html">Home</a>
            <a href="./specification.html">Specification</a>
            <a href="./index.html#metadata-guidelines" class="nav-current">Metadata Guidelines</a>
            <a href="./index.html#templates">Templates</a>
            <a href="./index.html#tools">Tools</a>
            <a href="./sdrf-explorer.html">Explorer</a>
            <a href="./index.html#contributors">Contributors</a>
            <a href="/dev/" class="version-link">Dev Version</a>
            <a href="https://github.com/bigbio/proteomics-metadata-standard" target="_blank">GitHub</a>
        </nav>
    </header>

    <div class="terms-container">
        <div class="page-header">
            <h1>SDRF Terms Reference</h1>
            <p>Comprehensive reference for all SDRF column terms, their ontology mappings, and allowed values. Use the filters to find specific terms or browse by template.</p>
        </div>

        <div class="filters">
            <div class="filter-row">
                <div class="filter-group">
                    <label>Search Term</label>
                    <input type="text" id="searchInput" placeholder="Filter by term name...">
                </div>
                <div class="filter-group">
                    <label>Type</label>
                    <select id="typeFilter">
                        <option value="">All Types</option>
                        <option value="characteristics">characteristics</option>
                        <option value="comment">comment</option>
                        <option value="factor value">factor value</option>
                        <option value="other">other</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Requirement</label>
                    <select id="requirementFilter">
                        <option value="">All Levels</option>
                        <option value="required">Required</option>
                        <option value="recommended">Recommended</option>
                        <option value="optional">Optional</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Template</label>
                    <select id="usageFilter">
                        <option value="">All Templates</option>
                        <option value="minimum">minimum</option>
                        <option value="default">default</option>
                        <option value="human">human</option>
                        <option value="cell-lines">cell-lines</option>
                        <option value="single-cell">single-cell</option>
                        <option value="immunopeptidomics">immunopeptidomics</option>
                        <option value="crosslinking">crosslinking</option>
                        <option value="metaproteomics">metaproteomics</option>
                        <option value="dia-acquisition">dia-acquisition</option>
                        <option value="dda-acquisition">dda-acquisition</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Ontology Status</label>
                    <select id="ontologyFilter">
                        <option value="">All</option>
                        <option value="defined">Has Ontology Term</option>
                        <option value="missing">To Be Filled</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>Values Source</label>
                    <input type="text" id="valuesSourceFilter" placeholder="e.g., CLO, UBERON, PRIDE...">
                </div>
                <div class="filter-group">
                    <label>Special Values</label>
                    <select id="specialValuesFilter">
                        <option value="">All</option>
                        <option value="allows_na">Allows "not applicable"</option>
                        <option value="allows_nav">Allows "not available"</option>
                        <option value="allows_both">Allows both</option>
                        <option value="allows_none">Allows neither</option>
                    </select>
                </div>
                <button class="clear-btn" onclick="clearFilters()">Clear Filters</button>
                <span class="stats" id="stats"></span>
            </div>
        </div>

        <div class="terms-table-wrapper">
            <table id="termsTable">
                <thead>
                    <tr>
                        <th data-sort="term">Term</th>
                        <th data-sort="requirement">Requirement</th>
                        <th data-sort="type">Type</th>
                        <th data-sort="ontology">Ontology Accession</th>
                        <th data-sort="usage">Usage (Templates)</th>
                        <th data-sort="values">Values Source</th>
                        <th>Special Values</th>
                        <th data-sort="description">Description</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
    </div>

    <footer class="site-footer">
        <div class="footer-content">
            <p>SDRF-Proteomics is developed by the <a href="https://psidev.info/" target="_blank">HUPO-PSI</a> community.</p>
            <p>Copyright &copy; Proteomics Standards Initiative. Licensed under <a href="https://github.com/bigbio/proteomics-metadata-standard/blob/master/LICENSE" target="_blank">Apache 2.0</a>.</p>
        </div>
    </footer>

    <script>
        // Embedded SDRF terms data
        const data = [
            // Core anchor columns - REQUIRED
            {term: "source name", type: "other", requirement: "required", ontology_term_accession: "PRIDE:0000623", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "free text", description: "Unique identifier for the biological sample", allow_not_available: false, allow_not_applicable: false},
            {term: "assay name", type: "other", requirement: "required", ontology_term_accession: "NCIT:C178857", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "free text", description: "Unique identifier for the MS run", allow_not_available: false, allow_not_applicable: false},
            {term: "technology type", type: "other", requirement: "required", ontology_term_accession: "EFO:0002772", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "fixed: proteomic profiling by mass spectrometry", description: "Type of technology used", allow_not_available: false, allow_not_applicable: false},
            // Core sample characteristics
            {term: "organism", type: "characteristics", requirement: "required", ontology_term_accession: "OBI:0100026", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "NCBITaxon", description: "Species of the sample", allow_not_available: false, allow_not_applicable: true},
            {term: "organism part", type: "characteristics", requirement: "recommended", ontology_term_accession: "EFO:0000635", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "UBERON, BTO", description: "Anatomical part of the organism", allow_not_available: true, allow_not_applicable: true},
            {term: "disease", type: "characteristics", requirement: "recommended", ontology_term_accession: "OGMS:0000031", usage: "default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, dia-acquisition, dda-acquisition", values: "MONDO, EFO, DOID, PATO", description: "Disease state of the sample", allow_not_available: true, allow_not_applicable: true},
            {term: "cell type", type: "characteristics", requirement: "recommended", ontology_term_accession: "EFO:0000324", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "CL, BTO, CLO", description: "Cell type of the sample", allow_not_available: true, allow_not_applicable: true},
            {term: "biological replicate", type: "characteristics", requirement: "required", ontology_term_accession: "MS:1001809", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "integer or pooled", description: "Identifier for the biological replicate", allow_not_available: false, allow_not_applicable: false},
            // Human-specific characteristics
            {term: "ancestry category", type: "characteristics", requirement: "recommended", ontology_term_accession: "HANCESTRO:0004", usage: "human, cell-lines", values: "HANCESTRO, EFO", description: "Ancestry or ethnic background of the donor", allow_not_available: true, allow_not_applicable: true},
            {term: "age", type: "characteristics", requirement: "recommended", ontology_term_accession: "EFO:0000246", usage: "human, cell-lines", values: "pattern: Y/M/D format", description: "Age of the donor at sample collection", allow_not_available: true, allow_not_applicable: true},
            {term: "sex", type: "characteristics", requirement: "recommended", ontology_term_accession: "PATO:0000047", usage: "human, cell-lines", values: "fixed: male, female, intersex, not available, not applicable", description: "Biological sex of the donor", allow_not_available: true, allow_not_applicable: true},
            {term: "developmental stage", type: "characteristics", requirement: "optional", ontology_term_accession: "EFO:0000399", usage: "human, cell-lines, single-cell", values: "HsapDv, EFO, MmusDv, UBERON", description: "Developmental stage of the donor", allow_not_available: true, allow_not_applicable: true},
            {term: "individual", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "human, cell-lines", values: "free text pattern", description: "Unique identifier for the donor individual", allow_not_available: true, allow_not_applicable: true},
            // Cell line characteristics
            {term: "cell line", type: "characteristics", requirement: "required", ontology_term_accession: "CLO:0000031", usage: "cell-lines, immunopeptidomics", values: "CLO, BTO, EFO", description: "Name of the cell line", allow_not_available: false, allow_not_applicable: true},
            {term: "cellosaurus accession", type: "characteristics", requirement: "recommended", ontology_term_accession: "to be filled", usage: "cell-lines", values: "Cellosaurus (CVCL_XXXX)", description: "Cellosaurus accession number for the cell line", allow_not_available: true, allow_not_applicable: true},
            {term: "cellosaurus name", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "cell-lines", values: "Cellosaurus", description: "Official Cellosaurus name for the cell line", allow_not_available: true, allow_not_applicable: true},
            {term: "sampling site", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "cell-lines", values: "UBERON, BTO", description: "Tissue or organ from which the cell line was derived", allow_not_available: true, allow_not_applicable: true},
            // Single-cell characteristics
            {term: "single cell isolation method", type: "characteristics", requirement: "required", ontology_term_accession: "EFO:0010214", usage: "single-cell", values: "fixed: FACS, microfluidics, laser capture microdissection, manual picking, CellenONE, nanoPOTS", description: "Method used to isolate single cells", allow_not_available: false, allow_not_applicable: true},
            {term: "cell identifier", type: "characteristics", requirement: "recommended", ontology_term_accession: "EFO:0010197", usage: "single-cell", values: "free text pattern", description: "Unique identifier for the single cell", allow_not_available: false, allow_not_applicable: false},
            {term: "cell viability", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "single-cell", values: "fixed: live, dead, unknown", description: "Viability status of the cell at isolation", allow_not_available: true, allow_not_applicable: true},
            {term: "cell cycle phase", type: "characteristics", requirement: "optional", ontology_term_accession: "GO:0022403", usage: "single-cell", values: "fixed: G1, S, G2, M, G0", description: "Cell cycle phase of the isolated cell", allow_not_available: true, allow_not_applicable: true},
            {term: "sorting marker", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "single-cell", values: "free text", description: "Markers used for cell sorting/selection", allow_not_available: true, allow_not_applicable: true},
            {term: "genotype", type: "characteristics", requirement: "optional", ontology_term_accession: "EFO:0000513", usage: "single-cell", values: "free text", description: "Genotype of the organism (for model organisms)", allow_not_available: true, allow_not_applicable: true},
            {term: "strain", type: "characteristics", requirement: "optional", ontology_term_accession: "EFO:0005135", usage: "single-cell", values: "free text", description: "Strain or genetic background of model organisms", allow_not_available: true, allow_not_applicable: true},
            // Immunopeptidomics characteristics
            {term: "MHC class", type: "characteristics", requirement: "required", ontology_term_accession: "to be filled", usage: "immunopeptidomics", values: "fixed: MHC class I, MHC class II, MHC class I and II", description: "MHC class targeted for immunopeptidome enrichment", allow_not_available: false, allow_not_applicable: false},
            {term: "immunopeptidome enrichment method", type: "characteristics", requirement: "required", ontology_term_accession: "to be filled", usage: "immunopeptidomics", values: "fixed: immunoaffinity purification, mild acid elution, detergent lysis", description: "Method used to enrich MHC-bound peptides", allow_not_available: false, allow_not_applicable: false},
            {term: "HLA typing", type: "characteristics", requirement: "recommended", ontology_term_accession: "NCIT:C71329", usage: "immunopeptidomics", values: "HLA nomenclature pattern", description: "HLA alleles expressed by the sample", allow_not_available: true, allow_not_applicable: true},
            {term: "HLA typing method", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "immunopeptidomics", values: "fixed: NGS-based typing, SSO typing, SSP typing, SBT typing, predicted from RNA-seq", description: "Method used for HLA typing", allow_not_available: true, allow_not_applicable: true},
            // Crosslinking characteristics
            {term: "crosslinking reagent", type: "characteristics", requirement: "required", ontology_term_accession: "to be filled", usage: "crosslinking", values: "XLMOD, ChEBI", description: "Name of the cross-linking reagent used", allow_not_available: false, allow_not_applicable: false},
            {term: "enrichment process", type: "characteristics", requirement: "required", ontology_term_accession: "to be filled", usage: "crosslinking", values: "fixed: enrichment of cross-linked peptides, not applicable", description: "Indicates if the sample was enriched for cross-linked peptides", allow_not_available: false, allow_not_applicable: true},
            {term: "crosslink type", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "crosslinking", values: "fixed: homo-bifunctional, hetero-bifunctional, zero-length, photo-reactive, cleavable", description: "Type of crosslinks being studied", allow_not_available: true, allow_not_applicable: true},
            {term: "crosslink distance", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "crosslinking", values: "pattern: number + A", description: "Maximum distance constraint provided by the crosslinker", allow_not_available: true, allow_not_applicable: true},
            {term: "crosslinking reaction time", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "crosslinking", values: "pattern: number + time unit", description: "Duration of the crosslinking reaction", allow_not_available: true, allow_not_applicable: true},
            {term: "crosslinking temperature", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "crosslinking", values: "pattern: number + C", description: "Temperature at which crosslinking was performed", allow_not_available: true, allow_not_applicable: true},
            // Metaproteomics characteristics
            {term: "environmental sample type", type: "characteristics", requirement: "required", ontology_term_accession: "to be filled", usage: "metaproteomics", values: "ENVO, EFO", description: "Type of environmental sample analyzed", allow_not_available: false, allow_not_applicable: true},
            {term: "sample collection method", type: "characteristics", requirement: "optional", ontology_term_accession: "OBI:0000659", usage: "metaproteomics", values: "free text", description: "Method used to collect the environmental sample", allow_not_available: true, allow_not_applicable: true},
            {term: "geographic location", type: "characteristics", requirement: "recommended", ontology_term_accession: "GAZ:00000448", usage: "metaproteomics", values: "GAZ", description: "Geographic location where sample was collected", allow_not_available: true, allow_not_applicable: true},
            {term: "collection date", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "metaproteomics", values: "ISO 8601 date", description: "Date when sample was collected", allow_not_available: true, allow_not_applicable: true},
            {term: "depth", type: "characteristics", requirement: "optional", ontology_term_accession: "PATO:0001595", usage: "metaproteomics", values: "pattern: number + m/cm", description: "Depth at which sample was collected", allow_not_available: true, allow_not_applicable: true},
            {term: "temperature", type: "characteristics", requirement: "optional", ontology_term_accession: "PATO:0000146", usage: "metaproteomics", values: "pattern: number + C", description: "Temperature at sampling location", allow_not_available: true, allow_not_applicable: true},
            {term: "pH", type: "characteristics", requirement: "optional", ontology_term_accession: "PATO:0001842", usage: "metaproteomics", values: "numeric", description: "pH at sampling location", allow_not_available: true, allow_not_applicable: true},
            {term: "host organism", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "metaproteomics", values: "NCBITaxon", description: "Host organism for host-associated microbiome samples", allow_not_available: true, allow_not_applicable: true},
            {term: "host disease", type: "characteristics", requirement: "optional", ontology_term_accession: "to be filled", usage: "metaproteomics", values: "MONDO, DOID", description: "Disease state of the host organism", allow_not_available: true, allow_not_applicable: true},
            // Core comment columns - data file metadata
            {term: "proteomics data acquisition method", type: "comment", requirement: "required", ontology_term_accession: "PRIDE:0000989", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "PRIDE", description: "Mass spectrometry acquisition method", allow_not_available: false, allow_not_applicable: true},
            {term: "label", type: "comment", requirement: "required", ontology_term_accession: "PRIDE:0000093", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "PRIDE", description: "Labeling strategy used for quantification", allow_not_available: false, allow_not_applicable: false},
            {term: "instrument", type: "comment", requirement: "required", ontology_term_accession: "MS:1000031", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "MS (PSI-MS)", description: "Mass spectrometer instrument used", allow_not_available: false, allow_not_applicable: false},
            {term: "cleavage agent details", type: "comment", requirement: "required", ontology_term_accession: "MS:1001045", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "MS (PSI-MS)", description: "Enzyme or chemical used for protein digestion", allow_not_available: false, allow_not_applicable: true},
            {term: "fraction identifier", type: "comment", requirement: "required", ontology_term_accession: "MS:1000858", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "integer", description: "Fraction number for fractionated samples", allow_not_available: false, allow_not_applicable: false},
            {term: "technical replicate", type: "comment", requirement: "required", ontology_term_accession: "MS:1001808", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "integer", description: "Identifier for the technical replicate", allow_not_available: false, allow_not_applicable: false},
            {term: "data file", type: "comment", requirement: "required", ontology_term_accession: "MS:1000577", usage: "minimum, default, human, cell-lines, single-cell, immunopeptidomics, crosslinking, metaproteomics, dia-acquisition, dda-acquisition", values: "file name", description: "Name of the raw data file", allow_not_available: false, allow_not_applicable: false},
            {term: "modification parameters", type: "comment", requirement: "recommended", ontology_term_accession: "MS:1001055", usage: "dia-acquisition, dda-acquisition", values: "Unimod, PSI-MOD", description: "Post-translational modifications searched", allow_not_available: true, allow_not_applicable: false},
            {term: "precursor mass tolerance", type: "comment", requirement: "optional", ontology_term_accession: "MS:1001412", usage: "dia-acquisition, dda-acquisition", values: "pattern: number + ppm/Da", description: "Precursor mass tolerance for database search", allow_not_available: true, allow_not_applicable: true},
            {term: "fragment mass tolerance", type: "comment", requirement: "optional", ontology_term_accession: "MS:1001413", usage: "dia-acquisition, dda-acquisition", values: "pattern: number + ppm/Da", description: "Fragment mass tolerance for database search", allow_not_available: true, allow_not_applicable: true},
            // Cell line comment columns
            {term: "passage number", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "cell-lines", values: "integer or range", description: "Passage number of the cell line", allow_not_available: true, allow_not_applicable: true},
            {term: "cell line source", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "cell-lines", values: "free text", description: "Repository or source from which the cell line was obtained", allow_not_available: true, allow_not_applicable: true},
            {term: "authentication method", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "cell-lines", values: "free text", description: "Method used to authenticate the cell line identity", allow_not_available: true, allow_not_applicable: true},
            // Single-cell comment columns
            {term: "carrier proteome", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "single-cell", values: "fixed: yes, no, not applicable", description: "Carrier proteome used in carrier-assisted SCP methods", allow_not_available: false, allow_not_applicable: true},
            {term: "carrier channel", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "single-cell", values: "TMT channel pattern", description: "TMT channel used for carrier proteome", allow_not_available: true, allow_not_applicable: true},
            {term: "reference channel", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "single-cell", values: "TMT channel pattern", description: "TMT channel used for reference/booster", allow_not_available: true, allow_not_applicable: true},
            {term: "cells per well", type: "comment", requirement: "recommended", ontology_term_accession: "to be filled", usage: "single-cell", values: "integer", description: "Number of cells per well/reaction", allow_not_available: true, allow_not_applicable: true},
            {term: "single cell quality", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "single-cell", values: "fixed: OK, pass, fail, not OK", description: "Quality assessment of the single cell preparation", allow_not_available: true, allow_not_applicable: true},
            // Immunopeptidomics comment columns
            {term: "cell number", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "immunopeptidomics", values: "scientific notation", description: "Number of cells used for immunopeptidome extraction", allow_not_available: true, allow_not_applicable: true},
            {term: "tissue mass", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "immunopeptidomics", values: "pattern: number + mg/g", description: "Mass of tissue used for immunopeptidome extraction", allow_not_available: true, allow_not_applicable: true},
            {term: "antibody used", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "immunopeptidomics", values: "free text", description: "Antibody clone used for MHC immunoprecipitation", allow_not_available: true, allow_not_applicable: true},
            {term: "elution conditions", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "immunopeptidomics", values: "free text", description: "Conditions used for peptide elution from MHC complexes", allow_not_available: true, allow_not_applicable: true},
            // Crosslinking comment columns
            {term: "cross-linking method", type: "comment", requirement: "required", ontology_term_accession: "to be filled", usage: "crosslinking", values: "fixed: cross-linking mass spectrometry, hydrogen-deuterium exchange, ion-mobility mass spectrometry", description: "MS-based cross-linking methodology used", allow_not_available: false, allow_not_applicable: false},
            {term: "cross-linker", type: "comment", requirement: "required", ontology_term_accession: "to be filled", usage: "crosslinking", values: "XLMOD key-value format", description: "Cross-linker compound with structured properties", allow_not_available: false, allow_not_applicable: false},
            {term: "crosslinker concentration", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "crosslinking", values: "pattern: number + mM/uM", description: "Concentration of crosslinking reagent used", allow_not_available: true, allow_not_applicable: true},
            {term: "crosslinker to protein ratio", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "crosslinking", values: "ratio pattern", description: "Molar ratio of crosslinker to protein", allow_not_available: true, allow_not_applicable: true},
            {term: "quenching reagent", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "crosslinking", values: "free text", description: "Reagent used to quench the crosslinking reaction", allow_not_available: true, allow_not_applicable: true},
            {term: "crosslink enrichment method", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "crosslinking", values: "fixed: size exclusion chromatography, strong cation exchange, affinity enrichment, peptide SEC, high-pH reversed phase, FAIMS", description: "Method used to enrich crosslinked peptides", allow_not_available: true, allow_not_applicable: true},
            // Metaproteomics comment columns
            {term: "database search strategy", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "metaproteomics", values: "fixed: matched metagenome, reference database, two-step search, spectral library", description: "Strategy used for protein database searching", allow_not_available: true, allow_not_applicable: true},
            {term: "metagenome accession", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "metaproteomics", values: "accession pattern", description: "Accession number for matched metagenome data", allow_not_available: true, allow_not_applicable: true},
            {term: "sample storage", type: "comment", requirement: "optional", ontology_term_accession: "to be filled", usage: "metaproteomics", values: "free text", description: "Storage conditions for the sample before analysis", allow_not_available: true, allow_not_applicable: true},
            // DIA-specific comment columns
            {term: "scan window lower limit", type: "comment", requirement: "recommended", ontology_term_accession: "to be filled", usage: "dia-acquisition", values: "numeric m/z", description: "Lower m/z limit of the DIA scan window", allow_not_available: true, allow_not_applicable: true},
            {term: "scan window upper limit", type: "comment", requirement: "recommended", ontology_term_accession: "to be filled", usage: "dia-acquisition", values: "numeric m/z", description: "Upper m/z limit of the DIA scan window", allow_not_available: true, allow_not_applicable: true},
            {term: "isolation window width", type: "comment", requirement: "recommended", ontology_term_accession: "MS:1000828", usage: "dia-acquisition", values: "numeric m/z", description: "Width of the isolation window in m/z units", allow_not_available: true, allow_not_applicable: true},
            {term: "DIA method", type: "comment", requirement: "recommended", ontology_term_accession: "PRIDE:0000695", usage: "dia-acquisition", values: "PRIDE", description: "Specific DIA method variant used", allow_not_available: true, allow_not_applicable: true},
            // DDA/DIA shared comment columns
            {term: "collision energy", type: "comment", requirement: "recommended", ontology_term_accession: "MS:1000045", usage: "dia-acquisition, dda-acquisition", values: "numeric or stepped", description: "Collision energy used for fragmentation", allow_not_available: true, allow_not_applicable: true},
            {term: "dissociation method", type: "comment", requirement: "recommended", ontology_term_accession: "MS:1000044", usage: "dia-acquisition, dda-acquisition", values: "MS (PSI-MS)", description: "Fragmentation method used", allow_not_available: true, allow_not_applicable: true},
            {term: "MS2 mass analyzer", type: "comment", requirement: "optional", ontology_term_accession: "MS:1000443", usage: "dia-acquisition, dda-acquisition", values: "MS (PSI-MS)", description: "Mass analyzer used for MS2 acquisition", allow_not_available: true, allow_not_applicable: true},
            // DDA-specific comment columns
            {term: "fractionation method", type: "comment", requirement: "optional", ontology_term_accession: "PRIDE:0000550", usage: "dda-acquisition", values: "PRIDE (children of PRIDE:0000550)", description: "Peptide fractionation method used before MS analysis", allow_not_available: true, allow_not_applicable: true},
            // Factor value columns
            {term: "disease", type: "factor value", requirement: "optional", ontology_term_accession: "OGMS:0000031", usage: "default, human, cell-lines", values: "MONDO, EFO, DOID", description: "Factor value indicating disease is the experimental variable", allow_not_available: false, allow_not_applicable: false},
            {term: "compound", type: "factor value", requirement: "optional", ontology_term_accession: "CHEBI:37577", usage: "default, human, cell-lines", values: "ChEBI, free text", description: "Factor value indicating compound/drug treatment is the experimental variable", allow_not_available: false, allow_not_applicable: false},
            {term: "cell line", type: "factor value", requirement: "optional", ontology_term_accession: "CLO:0000031", usage: "cell-lines", values: "Cellosaurus, free text", description: "Factor value indicating cell line is the experimental variable", allow_not_available: false, allow_not_applicable: false},
            {term: "organism part", type: "factor value", requirement: "optional", ontology_term_accession: "EFO:0000635", usage: "default, human", values: "UBERON, BTO", description: "Factor value indicating tissue/organ is the experimental variable", allow_not_available: false, allow_not_applicable: false},
            {term: "time", type: "factor value", requirement: "optional", ontology_term_accession: "EFO:0000721", usage: "default, human, cell-lines", values: "time pattern", description: "Factor value indicating time point is the experimental variable", allow_not_available: false, allow_not_applicable: false},
            {term: "dose", type: "factor value", requirement: "optional", ontology_term_accession: "EFO:0000428", usage: "default, human, cell-lines", values: "dose pattern", description: "Factor value indicating dose is the experimental variable", allow_not_available: false, allow_not_applicable: false}
        ];

        let sortColumn = 'term';
        let sortDirection = 'asc';

        // Initialize the table
        function loadData() {
            renderTable();
            updateStats();
        }

        function getOntologyLink(accession) {
            if (!accession || accession === 'to be filled') {
                return '<span class="to-be-filled">to be filled</span>';
            }

            const patterns = {
                'EFO:': 'https://www.ebi.ac.uk/ols4/ontologies/efo/classes/http%253A%252F%252Fwww.ebi.ac.uk%252Fefo%252FEFO_',
                'MS:': 'https://www.ebi.ac.uk/ols4/ontologies/ms/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FMS_',
                'PRIDE:': 'https://www.ebi.ac.uk/ols4/ontologies/pride/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FPRIDE_',
                'OBI:': 'https://www.ebi.ac.uk/ols4/ontologies/obi/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FOBI_',
                'NCIT:': 'https://www.ebi.ac.uk/ols4/ontologies/ncit/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FNCIT_',
                'CL:': 'https://www.ebi.ac.uk/ols4/ontologies/cl/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FCL_',
                'UBERON:': 'https://www.ebi.ac.uk/ols4/ontologies/uberon/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FUBERON_',
                'GO:': 'https://www.ebi.ac.uk/ols4/ontologies/go/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FGO_',
                'PATO:': 'https://www.ebi.ac.uk/ols4/ontologies/pato/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FPATO_',
                'CLO:': 'https://www.ebi.ac.uk/ols4/ontologies/clo/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FCLO_',
                'OGMS:': 'https://www.ebi.ac.uk/ols4/ontologies/ogms/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FOGMS_',
                'GAZ:': 'https://www.ebi.ac.uk/ols4/ontologies/gaz/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FGAZ_',
                'HANCESTRO:': 'https://www.ebi.ac.uk/ols4/ontologies/hancestro/classes/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252FHANCESTRO_'
            };

            for (const [prefix, baseUrl] of Object.entries(patterns)) {
                if (accession.startsWith(prefix)) {
                    const id = accession.replace(prefix, '').replace(':', '_');
                    return `<a href="${baseUrl}${id}" target="_blank" class="ontology-link">${accession}</a>`;
                }
            }

            return `<span class="ontology-link">${accession}</span>`;
        }

        function formatType(type) {
            const classes = {
                'characteristics': 'type-characteristics',
                'comment': 'type-comment',
                'other': 'type-other'
            };
            return `<span class="${classes[type] || ''}">${type}</span>`;
        }

        function formatRequirement(requirement) {
            const classes = {
                'required': 'req-required',
                'recommended': 'req-recommended',
                'optional': 'req-optional'
            };
            return `<span class="${classes[requirement] || 'req-optional'}">${requirement || 'optional'}</span>`;
        }

        function formatUsage(usage) {
            if (!usage) return '';
            return usage.split(', ').map(u => `<span class="usage-tag">${u.trim()}</span>`).join(' ');
        }

        function formatValuesSource(values) {
            if (!values) return '';
            // Check if it's an ontology-like value (contains known ontology abbreviations)
            const ontologies = ['NCBITaxon', 'UBERON', 'BTO', 'MONDO', 'EFO', 'DOID', 'CL', 'CLO', 'HANCESTRO', 
                              'HsapDv', 'PRIDE', 'MS', 'PSI-MS', 'Unimod', 'PSI-MOD', 'XLMOD', 'ChEBI', 
                              'ENVO', 'GAZ', 'Cellosaurus'];
            
            // Split by comma and check each part
            const parts = values.split(',').map(p => p.trim());
            let hasOntology = false;
            
            for (const ont of ontologies) {
                if (values.includes(ont)) {
                    hasOntology = true;
                    break;
                }
            }
            
            if (hasOntology) {
                return parts.map(p => `<span class="values-source-tag">${p}</span>`).join(' ');
            }
            return values;
        }

        function formatSpecialValues(row) {
            const indicators = [];
            if (row.allow_not_applicable) {
                indicators.push('<span class="indicator indicator-na" title="Allows not applicable">N/A</span>');
            }
            if (row.allow_not_available) {
                indicators.push('<span class="indicator indicator-nav" title="Allows not available">N/Av</span>');
            }
            if (indicators.length === 0) {
                return '<span style="color: var(--text-light); font-size: 0.75rem;">—</span>';
            }
            return '<div class="special-values">' + indicators.join('') + '</div>';
        }

        function renderTable() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const typeFilter = document.getElementById('typeFilter').value;
            const requirementFilter = document.getElementById('requirementFilter').value;
            const usageFilter = document.getElementById('usageFilter').value;
            const ontologyFilter = document.getElementById('ontologyFilter').value;
            const valuesSourceFilter = document.getElementById('valuesSourceFilter').value.toLowerCase().trim();
            const specialValuesFilter = document.getElementById('specialValuesFilter').value;

            let filteredData = data.filter(row => {
                const matchesSearch = !searchTerm ||
                    row.term.toLowerCase().includes(searchTerm) ||
                    row.description.toLowerCase().includes(searchTerm);
                const matchesType = !typeFilter || row.type === typeFilter;
                const matchesRequirement = !requirementFilter || row.requirement === requirementFilter;
                const matchesUsage = !usageFilter || row.usage.includes(usageFilter);
                const matchesOntology = !ontologyFilter ||
                    (ontologyFilter === 'defined' && row.ontology_term_accession && row.ontology_term_accession !== 'to be filled') ||
                    (ontologyFilter === 'missing' && (!row.ontology_term_accession || row.ontology_term_accession === 'to be filled'));

                // Values Source filter (fuzzy search)
                const matchesValuesSource = !valuesSourceFilter ||
                    row.values.toLowerCase().includes(valuesSourceFilter);
                
                // Special Values filter
                let matchesSpecialValues = true;
                if (specialValuesFilter === 'allows_na') {
                    matchesSpecialValues = row.allow_not_applicable;
                } else if (specialValuesFilter === 'allows_nav') {
                    matchesSpecialValues = row.allow_not_available;
                } else if (specialValuesFilter === 'allows_both') {
                    matchesSpecialValues = row.allow_not_applicable && row.allow_not_available;
                } else if (specialValuesFilter === 'allows_none') {
                    matchesSpecialValues = !row.allow_not_applicable && !row.allow_not_available;
                }

                return matchesSearch && matchesType && matchesRequirement && matchesUsage && matchesOntology && matchesValuesSource && matchesSpecialValues;
            });

            // Sort
            filteredData.sort((a, b) => {
                let aVal = a[sortColumn] || '';
                let bVal = b[sortColumn] || '';
                if (sortDirection === 'asc') {
                    return aVal.localeCompare(bVal);
                } else {
                    return bVal.localeCompare(aVal);
                }
            });

            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = filteredData.map(row => `
                <tr>
                    <td><span class="term-name">${row.term}</span></td>
                    <td>${formatRequirement(row.requirement)}</td>
                    <td>${formatType(row.type)}</td>
                    <td>${getOntologyLink(row.ontology_term_accession)}</td>
                    <td>${formatUsage(row.usage)}</td>
                    <td class="values-cell">${formatValuesSource(row.values)}</td>
                    <td>${formatSpecialValues(row)}</td>
                    <td class="description-cell" title="${row.description}">${row.description}</td>
                </tr>
            `).join('');

            updateStats(filteredData.length);
            updateSortIndicators();
        }

        function updateStats(count) {
            const total = data.length;
            const shown = count !== undefined ? count : total;
            document.getElementById('stats').textContent = `Showing ${shown} of ${total} terms`;
        }

        function updateSortIndicators() {
            document.querySelectorAll('th').forEach(th => {
                th.classList.remove('sorted-asc', 'sorted-desc');
                if (th.dataset.sort === sortColumn) {
                    th.classList.add(sortDirection === 'asc' ? 'sorted-asc' : 'sorted-desc');
                }
            });
        }

        function clearFilters() {
            document.getElementById('searchInput').value = '';
            document.getElementById('typeFilter').value = '';
            document.getElementById('requirementFilter').value = '';
            document.getElementById('usageFilter').value = '';
            document.getElementById('ontologyFilter').value = '';
            document.getElementById('valuesSourceFilter').value = '';
            document.getElementById('specialValuesFilter').value = '';
            renderTable();
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', renderTable);
        document.getElementById('typeFilter').addEventListener('change', renderTable);
        document.getElementById('requirementFilter').addEventListener('change', renderTable);
        document.getElementById('usageFilter').addEventListener('change', renderTable);
        document.getElementById('ontologyFilter').addEventListener('change', renderTable);
        document.getElementById('valuesSourceFilter').addEventListener('input', renderTable);
        document.getElementById('specialValuesFilter').addEventListener('change', renderTable);

        document.querySelectorAll('th[data-sort]').forEach(th => {
            th.addEventListener('click', () => {
                const column = th.dataset.sort;
                if (sortColumn === column) {
                    sortDirection = sortDirection === 'asc' ? 'desc' : 'asc';
                } else {
                    sortColumn = column;
                    sortDirection = 'asc';
                }
                renderTable();
            });
        });

        // Load data on page load
        loadData();
    </script>
</body>
</html>
